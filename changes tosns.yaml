version: 0.2
phases:
  build:
    commands:
      - |
        for i in $(git diff --name-only HEAD HEAD~1); do
          if [[ $i == *"kk.txt"* ]]; then
            echo "kk.txt file changes"
            if aws sns publish --topic-arn arn:aws:sns:us-east-1:824738494196:temp --message "kkk.txt folder changes"; then
              echo "SNS notification sent to email"
            else
              echo "Error sending SNS notification"
            fi
          elif [[ $i == *"bose.txt"* ]]; then
            echo "bose.txt has changed"
            if aws sns publish --topic-arn arn:aws:sns:us-east-1:824738494196:temp --message "bose.txt has changed"; then
              echo "SNS notification sent to email"
            else
              echo "Error sending SNS notification"
            fi
          fi
        done
